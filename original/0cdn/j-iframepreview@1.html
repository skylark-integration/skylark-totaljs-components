<style>.ui-iframepreview *{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box}.ui-iframepreview{position:fixed;left:0;top:0;background-color:rgba(255,255,255,0.5);bottom:0;right:0;padding:30px 20px}.ui-iframepreview > div{margin:0 auto;display:block;position:relative;height:100%}.ui-iframepreview iframe{width:100%;height:100%}.ui-iframepreview .fa{position:absolute;right:-10px;top:-10px;font-size:20px;background-color:white;border-radius:100px;width:30px;height:30px;padding:3px 0 0;text-align:center;box-shadow:0 0 4px rgba(0,0,0,0.2);border:2px solid #E0E0E0;cursor:pointer}.ui-iframepreview .fa:active{top:-9px}.hidden{display:none}</style>
<script>COMPONENT('iframepreview@1','width:800',function(self,config){var iframe,is=null,W=window;if(!W.$iframepreview){W.$iframepreview=true;$(W).on('keydown',function(e){e.which===27&&FIND('iframepreview',true).forEach(FN('n => n.hide()'))})}self.reconfigure=function(key,value,init){if(init)return;key==='width'&&self.find('div').eq(0).css('width',value+'px')};self.readonly();self.nocompile&&self.nocompile();self.make=function(){self.aclass('ui-iframepreview hidden');self.html('<div style="max-width:{0}px"><i class="fa fa-times-circle"></i><iframe src="about:blank" frameborder="0" allowfullscreen></div>'.format(config.width));iframe=self.find('iframe');self.event('click','.fa',self.hide)};self.open=function(url){W.$iframepreview_current&&W.$iframepreview_current!==self&&W.$iframepreview_current.hide();url&&iframe.attr('src',url);if(is)return;self.rclass('hidden');W.$iframepreview_current=self;is=true};self.show=self.open;self.hide=function(){if(is){self.aclass('hidden');is=false}};self.setter=function(value){if(value)self.open(value);else self.hide()}});</script>