<style>.ui-textarea-container *{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box}.ui-textarea{border:1px solid #E0E0E0;padding:4px 5px;border-radius:2px;position:relative;display:block;width:100%;background-color:white}.ui-textarea textarea{border:0;width:100%;height:100%;outline:0;font:normal 14px Arial;color:black;resize:none;min-height:50px;background-color:white;padding:0}.ui-textarea-label{margin-bottom:5px;font-size:12px;text-align:left}.ui-textarea-label .fa{margin-right:5px}.ui-textarea-required .ui-textarea-label{font-weight:bold}.ui-textarea-required .ui-textarea-label:before{color:red;content:'***';margin-right:5px}.ui-textarea-required .ui-textarea{border-color:#D0D0D0}.ui-textarea-invalid .ui-textarea{border-color:#E7B8B8 !important;background-color:#FFF3F3 !important}.ui-textarea-invalid textarea{background-color:#FFF3F3 !important}.ui-textarea-monospace textarea{font-family:monospace;font-size:14px}.ui-textarea-helper{margin-top:8px;font-size:11px;color:red;text-align:left;display:none}.ui-textarea-helper-show{display:block}.ui-disabled.ui-textarea{background-color:#F0F0F0;cursor:not-allowed}.ui-disabled.ui-textarea textarea{background-color:#F0F0F0}</style>
<script>COMPONENT('textarea@1',function(self,config){var input,content=null;self.nocompile&&self.nocompile();self.validate=function(value){if(config.disabled||!config.required||config.readonly)return true;if(value==null)value='';else value=value.toString();return value.length>0};self.configure=function(key,value,init){if(init)return;var redraw=false;switch(key){case'readonly':self.find('textarea').prop('readonly',value);break;case'disabled':self.tclass('ui-disabled',value);self.find('textarea').prop('disabled',value);self.reset();break;case'required':self.noValid(!value);!value&&self.state(1,1);self.tclass('ui-textarea-required',value);break;case'placeholder':input.prop('placeholder',value||'');break;case'maxlength':input.prop('maxlength',value||1000);break;case'label':redraw=true;break;case'autofocus':input.focus();break;case'monospace':self.tclass('ui-textarea-monospace',value);break;case'icon':redraw=true;break;case'format':self.format=value;self.refresh();break;case'height':self.find('textarea').css('height',(value>0?value+'px':value));break}redraw&&setTimeout2('redraw'+self.id,function(){self.redraw();self.refresh()},100)};self.redraw=function(){var attrs=[],builder=[];self.tclass('ui-disabled',config.disabled===true);self.tclass('ui-textarea-monospace',config.monospace===true);self.tclass('ui-textarea-required',config.required===true);config.placeholder&&attrs.attr('placeholder',config.placeholder);config.maxlength&&attrs.attr('maxlength',config.maxlength);config.error&&attrs.attr('error');attrs.attr('data-jc-bind','');config.height&&attrs.attr('style','height:{0}px'.format(config.height));config.autofocus==='true'&&attrs.attr('autofocus');config.disabled&&attrs.attr('disabled');config.readonly&&attrs.attr('readonly');builder.push('<textarea {0}></textarea>'.format(attrs.join(' ')));var label=config.label||content;if(!label.length){config.error&&builder.push('<div class="ui-textarea-helper"><i class="fa fa-warning" aria-hidden="true"></i> {0}</div>'.format(config.error));self.aclass('ui-textarea ui-textarea-container');self.html(builder.join(''));input=self.find('textarea');return}var html=builder.join('');builder=[];builder.push('<div class="ui-textarea-label">');config.icon&&builder.push('<i class="fa fa-{0}"></i>'.format(config.icon));builder.push(label);builder.push(':</div><div class="ui-textarea">{0}</div>'.format(html));config.error&&builder.push('<div class="ui-textarea-helper"><i class="fa fa-warning" aria-hidden="true"></i> {0}</div>'.format(config.error));self.html(builder.join(''));self.rclass('ui-textarea');self.aclass('ui-textarea-container');input=self.find('textarea')};self.make=function(){content=self.html();self.type=config.type;self.format=config.format;self.redraw()};self.state=function(type){if(!type)return;var invalid=config.required?self.isInvalid():false;if(invalid===self.$oldstate)return;self.$oldstate=invalid;self.tclass('ui-textarea-invalid',invalid);config.error&&self.find('.ui-textarea-helper').tclass('ui-textarea-helper-show',invalid)}});</script>