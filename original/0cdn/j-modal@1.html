<style>.hidden{display:none}.ui-modal-noscroll{overflow:hidden}.ui-modal-body{position:absolute;left:0;right:0;top:0;bottom:0;overflow:auto}.ui-modal-container{width:100%;position:fixed;left:0;top:0;bottom:0;right:0;background-color:white;z-index:5;overflow-y:scroll;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;opacity:0;filter:alpha(opacity=0);transform:scale(0.9);-webkit-transform:scale(0.9);-moz-transform:scale(0.9);-ms-transform:scale(0.9);transition:all 0.3s;-webkit-transition:all 0.3s;-moz-transition:all 0.3s;-ms-transition:all 0.3s;overflow-scrolling:touch;-webkit-overflow-scrolling:touch;-moz-overflow-scrolling:touch;-ms-overflow-scrolling:touch}.ui-modal-visible{opacity:1;filter:alpha(opacity=100);transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1)}.ui-modal-close{position:absolute;right:50px;top:50px;color:gray;font-size:11px;text-decoration:none !important;text-align:center;z-index:100}.ui-modal-close i{font-size:30px;margin-bottom:3px;display:block}.ui-modal-close:hover{color:black}</style>
<script>COMPONENT('modal@1',function(self){var reload=self.attrd('reload');if(!MAN.$$modal){window.$$modal_level=window.$$modal_level||1;MAN.$$modal=true;$(document).on('click','.ui-modal-close',function(){SET($(this).attr('data-path'),'');window.$$modal_level--})}self.readonly();self.make=function(){self.condition=self.attrd('if');$(document.body).append('<div id="{0}" class="hidden ui-modal-container"><a href="javascript:void(0)" class="ui-modal-close" data-path="{2}"><i class="fa fa-times"></i>{1}</a><div class="ui-modal-body"></div></div>'.format(self._id,self.attrd('button')||'Close window',self.path));var el=$('#'+self._id);el.find('.ui-modal-body').get(0).appendChild(self.element.get(0));self.rclass('hidden');self.element=el;self.event('scroll',function(){EMIT('reflow',self.name)});self.attrd('esc')!=='false'&&$(window).on('keydown',function(e){e.which===27&&self.get()&&self.set('')})};self.getter=null;self.setter=function(){setTimeout2(self.id+'.scroll',function(){$('html').tclass('ui-modal-noscroll',!!$('.ui-modal-container').not('.hidden').length)},100);var isHidden=!EVALUATE(self.path,self.condition);if(self.hclass('hidden')&&isHidden)return;EMIT('reflow',self.name);if(isHidden){self.rclass('ui-modal-visible');setTimeout2(self.id,function(){self.aclass('hidden')},50);return}window.$$modal_level++;self.rclass('hidden');setTimeout2(self.id,function(){self.aclass('ui-modal-visible')},50);reload&&EXEC(reload,self);self.element.css('z-index',window.$$modal_level*5);self.find('.ui-modal-body').animate({scrollTop:0},0,NOOP,300)}});</script>