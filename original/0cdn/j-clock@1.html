<style>.ui-clock *{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;font-size:12px}.ui-clock{font-size:12px;position:absolute;background-color:#FFF;max-width:250px;width:100%;border:1px solid #E0E0E0;left:100px;top:100px;border-radius:2px;z-index:100;color:gray;box-shadow:0 5px 25px rgba(0,0,0,0.1);opacity:0;filter:alpha(opacity=0);filter:alpha(opacity=0);-webkit-filter:alpha(opacity=0);-moz-filter:alpha(opacity=0);-ms-filter:alpha(opacity=0);transform:scale(0.6);-webkit-transform:scale(0.6);-moz-transform:scale(0.6);-ms-transform:scale(0.6);-webkit-transform:scale(0.6);-moz-transform:scale(0.6);-ms-transform:scale(0.6);transition:all .2s;-webkit-transition:all .2s;-moz-transition:all .2s;-ms-transition:all .2s;-webkit-transition:all .2s;-moz-transition:all .2s;-ms-transition:all .2s}.ui-clock-visible{transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);opacity:1;filter:alpha(opacity=100);filter:alpha(opacity=100);-webkit-filter:alpha(opacity=100);-moz-filter:alpha(opacity=100);-ms-filter:alpha(opacity=100)}.ui-clock-header{height:40px;font-weight:bold;border-bottom:1px solid #E0E0E0;text-align:center;font-size:16pt;padding:5px 10px 0}.ui-clock-header a{cursor:pointer;font-size:16pt;color:gray}a.ui-clock-active{color:#0095DD}.ui-clock-body{background-color:#f9f9f9;width:250px;height:220px}.ui-clock-holder{position:absolute;left:20px;border:1px solid #ccc;background-color:#fff;border-radius:50%;width:200px;height:200px;margin-top:10px}.ui-clock-dial{width:200px;height:200px;position:absolute;left:-1px;top:-1px}.ui-clock-minutes{visibility:hidden}.ui-clock-tick{border-radius:50%;color:#666;line-height:26px;text-align:center;width:26px;height:26px;position:absolute;cursor:pointer}.ui-clock-tick-selected{background-color:RGBA(0,149,221,0.2)}.ui-clock-swap{left:85px;top:87px;font-size:16pt;position:absolute;cursor:pointer}.ui-clock-footer{border-top:1px solid #E0E0E0;background-color:#F0F0F0;padding:8px 10px}.hidden{display:none}</style>
<script>COMPONENT('clock@1','twelvehour:false',function(self,config){var visible=false,dialRadius=100,outerRadius=80,innerRadius=54,tickRadius=13;self.readonly();self.nocompile&&self.nocompile();self.click=NOOP;self.hide=function(){self.aclass('hidden');self.rclass('ui-clock-visible');visible=false;return self};self.toggle=function(el,value,callback,offset){if(self.older===el[0]){if(!self.hclass('hidden')){self.hide();return}}self.older=el[0];self.activeMinutes=false;self.show(el,value,callback,offset);return self};self.show=function(el,value,callback,offset){setTimeout(function(){clearTimeout2('clockhide')},5);if(!el)return self.hide();var off=el.offset();var h=el.innerHeight();self.css({left:off.left+(offset||0),top:off.top+h+12});self.rclass('hidden');self.click=callback;self.time(value);visible=true;self.aclass('ui-clock-visible',50);return self};self.make=function(){self.aclass('ui-clock hidden');self.event('click','.ui-clock-tick',function(e){clearTimeout2('clockhide');e.preventDefault();e.stopPropagation();var val=this.getAttribute('data-value');if(!self.activeMinutes)return self.time(val,true);self.hide();self.click&&self.click(val)});self.event('click','.ui-clock-header-twelve, .ui-clock-swap',function(e){clearTimeout2('clockhide');e.preventDefault();e.stopPropagation();var val=this.getAttribute('data-value');if(val.indexOf('PM')!==-1)val=val.replace('PM','AM');else val=val.replace('AM','PM');self.time(val,self.activeMinutes)});self.event('click','.ui-clock-header-hours',function(e){clearTimeout2('clockhide');e.preventDefault();e.stopPropagation();var val=this.getAttribute('data-value');self.time(val)});self.event('click','.ui-clock-header-minutes',function(e){clearTimeout2('clockhide');e.preventDefault();e.stopPropagation();var val=this.getAttribute('data-value');self.time(val,true)});self.event('click','.ui-clock-header, .ui-clock-body',function(e){e.stopPropagation()});$(window).on('scroll click',function(){visible&&setTimeout2('clockhide',function(){EXEC('$clock.hide')},20)});window.$clock=self;self.on('reflow',function(){visible&&EXEC('$clock.hide')})};self.time=function(value,showminutes){showminutes=self.activeMinutes=showminutes||false;var hours,minutes,isAmPm='',swapAmPm='',radian,radius,left,right,font,hoursView='';if(value instanceof Date)value=value.format('HH:mm');if(!value)value=new Date().format('HH:mm');value=value.split(':');hours=parseInt(value[0]);value=value[1].split(' ');minutes=parseInt(value[0]);if(value[1]!=null)isAmPm=value[1];if(config.twelvehour&&value[1]==null){isAmPm=hours>=12?'PM':'AM';hours=hours%12||12}if(hours<10)hours='0'+hours;if(minutes<10)minutes='0'+minutes;if(isAmPm!==''){swapAmPm=isAmPm=='PM'?'AM':'PM';isAmPm=' '+isAmPm}if(showminutes){for(i=0;i<60;i+=5){radian=i/30*Math.PI;radius=outerRadius;left=(dialRadius+Math.sin(radian)*radius-tickRadius).toFixed(2);right=(dialRadius-Math.cos(radian)*radius-tickRadius).toFixed(2);font='120';hoursView+='<div class="ui-clock-tick {0}" data-value="{1}:{2}{3}" style="left: {4}px; top: {5}px; font-size: {6}%;">{2}</div>'.format((i==minutes?'ui-clock-tick-selected':''),hours,(i<10?'0'+i:i),isAmPm,left,right,font)}}else{if(config.twelvehour){for(i=1;i<13;i+=1){radian=i/6*Math.PI;radius=outerRadius;left=(dialRadius+Math.sin(radian)*radius-tickRadius).toFixed(2);right=(dialRadius-Math.cos(radian)*radius-tickRadius).toFixed(2);font='120';hoursView+='<div class="ui-clock-tick {0}" data-value="{1}:{2}{3}" style="left: {4}px; top: {5}px; font-size: {6}%;">{7}</div>'.format((i==hours?'ui-clock-tick-selected':''),i,minutes,isAmPm,left,right,font,(i===0?'00':i))}}else{for(var i=0;i<24;i++){radian=i/6*Math.PI;var inner=i>0&&i<13;radius=inner?innerRadius:outerRadius;left=(dialRadius+Math.sin(radian)*radius-tickRadius).toFixed(2);right=(dialRadius-Math.cos(radian)*radius-tickRadius).toFixed(2);font=inner?'120':'100';hoursView+='<div class="ui-clock-tick {0}" data-value="{1}:{2}" style="left: {3}px; top: {4}px; font-size: {5}%;">{6}</div>'.format((i==hours?'ui-clock-tick-selected':''),i,minutes,left,right,font,(i===0?'00':i))}}}self.html('<div class="ui-clock-header"><a href="javascript:void(0)" class="ui-clock-header-hours {5}" data-value="{0}:{1}{2}" >{0}</a> : <a href="javascript:void(0)" class="ui-clock-header-minutes {6}" data-value="{0}:{1}{2}">{1}</a> <a href="javascript:void(0)" class="ui-clock-header-twelve" data-value="{0}:{1}{2}">{2}</a></div><div class="ui-clock-body"><div class="ui-clock-holder">{3}<a href="javascript:void(0)" class="ui-clock-swap" data-value="{0}:{1}{2}">{4}</a></div></div><div class="ui-clock-footer"><a href="javascript:void(0)">Close</a></div>'.format(hours,minutes,isAmPm,hoursView,swapAmPm,(!showminutes?'ui-clock-active':''),(showminutes?'ui-clock-active':'')))}});</script>